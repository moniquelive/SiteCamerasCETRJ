<script>
    (function () {
        const menu = document.querySelector(".nav-menu");
        if (!menu) return;
        const summary = menu.querySelector(".nav-toggle");
        const mediaQuery = window.matchMedia("(min-width: 768px)");
        const syncAria = function () {
            if (!summary) return;
            summary.setAttribute("aria-expanded", menu.hasAttribute("open") ? "true" : "false");
        };
        const syncMenu = function () {
            if (mediaQuery.matches) {
                menu.setAttribute("open", "");
            } else {
                menu.removeAttribute("open");
            }
            syncAria();
        };
        syncMenu();
        menu.addEventListener("toggle", syncAria);
        if (mediaQuery.addEventListener) {
            mediaQuery.addEventListener("change", syncMenu);
        } else if (mediaQuery.addListener) {
            mediaQuery.addListener(syncMenu);
        }
    })();
  </script>
 <script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=698384028370db21df8310bb&product=sop" async="async"></script>
 {{ $bairros := resources.Get "js/cor-bairros.json" | fingerprint }}
 {{ $main := resources.Get "js/main.js" | minify | fingerprint }}
 <script>
    window.CAMERAS_RJ_ASSETS = {
        bairrosUrl: "{{ $bairros.RelPermalink }}",
        mainUrl: "{{ $main.RelPermalink }}"
    };
 </script>
 <script defer src="{{ $main.RelPermalink }}"></script>
 <script>
    if (window.init) {
        window.init();
    } else {
        window.addEventListener("DOMContentLoaded", function () {
            if (window.init) window.init();
        });
    }
 </script>
 
 {{/* Service Worker Registration */}}
 <script>
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
            navigator.serviceWorker.register('{{ "sw.js" | relURL }}')
                .then(function(registration) {
                    console.log('ServiceWorker registered:', registration.scope);
                })
                .catch(function(error) {
                    console.log('ServiceWorker registration failed:', error);
                });
        });
    }
 </script>
